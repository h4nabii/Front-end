<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>xml文件</title>
    <script type="text/javascript">
        window.onload = function () {
            let btn = document.getElementById("btn");
            btn.onclick = showBookInfo;

            function showBookInfo() {
                document.getElementById("bookInfo").innerHTML = "";

                let xhr = new XMLHttpRequest();
                xhr.open("get", "./data/data.xml");
                xhr.send();
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4 && xhr.status === 200) {
                        let data = xhr.responseXML;

                        let bs = data.getElementsByTagName("bookstore")[0];
                        console.log(bs);
                        let books = bs.getElementsByTagName("book");
                        let tag = "";
                        for (let i = 0; i < books.length; i++) {
                            let book = books[i];
                            let name = book.getElementsByTagName("name")[0];
                            let category = book.getElementsByTagName("category")[0];
                            let desc = book.getElementsByTagName("desc")[0];
                            tag += "<tr><td>" + getNodeText(name) + "</td><td>" + getNodeText(category) + "</td><td>" + getNodeText(desc) + "</td></tr>";
                        }
                        let tbody = document.createElement("tbody");
                        tbody.innerHTML = tag;
                        document.getElementById("bookInfo").appendChild(tbody);
                    }
                };
            }
        };

        function getNodeText(node) {
            if (node.nodeType === Node.ELEMENT_NODE /* 1 */) {
                return node.textContent;
            }
        }
    </script>
</head>
<body>
<input type="button" value="点击" id="btn">
<div>
    <table id="bookInfo">
    </table>
</div>
</body>
</html>
