<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .date {
            display: flex;
            align-items: center;
            width: 674px;
            height: 126px;
            background-image: linear-gradient(#066bc1, #67a7e0);
            border-radius: 20px;
            color: #fff;
        }

        .time {
            display: flex;
            align-items: flex-end;
        }

        .time .h-m-s {
            margin-left: 56px;
        }

        .time .h-m-s .h-m {
            font-size: 56px;
            line-height: 1;
        }

        .time .h-m-s .s {
            font-size: 26px;
            margin-left: 12px;
        }

        .time .y-m-d {
            margin-left: 32px;
        }

        .time .y-m-d .d {
            font-size: 25px;
        }

        .time .y-m-d .y-m {
            font-size: 18px;
        }

        .clock {
            position: relative; /* anchor for child absolute */
            width: 90px;
            height: 90px;
            margin-left: 90px;
        }

        .clock .init-number {
            position: absolute;
            left: 50%;
            top: 0;
            margin-left: -1px;
            width: 2px;
            transform-origin: 50% 45px;

            background-color: #5d9fd9;
            height: 5px;
        }

        .clock .init-number:nth-child(5n+1) {
            background-color: white;
            height: 10px;
        }

        .clock .hour-hand {
            --length: 25px;
            --width: 4px;
        }

        .clock .minute-hand {
            --length: 35px;
            --width: 2px;
        }

        .clock .second-hand {
            --length: 37px;
            --width: 1px;
        }

        .clock .hands {
            position: absolute;
            left: 50%;
            margin-left: calc(0px - var(--width) / 2);
            top: calc(45px - var(--length));
            width: var(--width);
            transform-origin: 50% calc(0px + var(--length));

            background-color: white;
            height: var(--length);
        }
    </style>
</head>
<body>
<div class="date"></div>
<script>
    function getDayStrOf(day) {
        return ['日', '一', '二', '三', '四', '五', '六'][day]
    }

    function padToTwo(num) {
        return (num + '').padStart(2, "0");
    }

    function generateNodeBy(tagName, className, transform) {
        let node = document.createElement(tagName);
        node.className = className;
        node.style.transform = transform;
        return node;
    }

    function construct(node) {
        return {
            append(newNode) {
                node.appendChild(newNode);
                return this;
            },
            done() {
                return node;
            }
        }
    }

    // 时钟的html
    function createClockNode() {
        let clockNode = generateNodeBy("div", "clock");
        for (let i = 0; i < 60; i++) {
            clockNode.appendChild(generateNodeBy(
                "i",
                "init-number",
                "rotate(" + (6 * i) + "deg)"
            ));
        }
        return construct(clockNode)
            .append(generateNodeBy("i", "hour-hand hands"))
            .append(generateNodeBy("i", "minute-hand hands"))
            .append(generateNodeBy("i", "second-hand hands"))
            .done();
    }

    function createTimeNode() {
        return construct(generateNodeBy("div", "time"))
            .append(construct(generateNodeBy("div", "h-m-s"))
                .append(generateNodeBy("span", "h-m"))
                .append(generateNodeBy("span", "s"))
                .done())
            .append(construct(generateNodeBy("div", "y-m-d"))
                .append(generateNodeBy("div", "d"))
                .append(generateNodeBy("div", "y-m"))
                .done())
            .done();
    }

    function updateTime() {
        let dateObj = new Date();
        let year = dateObj.getFullYear();
        let month = dateObj.getMonth() + 1;
        let date = dateObj.getDate();
        let day = dateObj.getDay();
        let hours = dateObj.getHours();
        let minutes = dateObj.getMinutes();
        let seconds = dateObj.getSeconds();

        document.querySelector(".h-m").textContent = padToTwo(hours) + ":" + padToTwo(minutes)
        document.querySelector(".s").textContent = padToTwo(seconds)
        document.querySelector(".d").textContent = "星期" + getDayStrOf(day);
        document.querySelector(".y-m").textContent = year + "年" + month + "月" + date + "日";

        document.querySelector(".hour-hand").style.transform = "rotate(" + (hours * 30 + minutes * 0.5) + "deg)";
        document.querySelector(".minute-hand").style.transform = "rotate(" + (minutes * 6) + "deg)";
        document.querySelector(".second-hand").style.transform = "rotate(" + (seconds * 6) + "deg)";
    }

    function createClock() {
        let dateNode = document.querySelector('.date');
        dateNode.appendChild(createClockNode());
        dateNode.appendChild(createTimeNode());
    }

    createClock()
    updateTime()
    setTimeout(() => {
        updateTime()
        setInterval(updateTime, 1000);
    }, 1000 - new Date().getMilliseconds());
</script>
</body>
</html>
