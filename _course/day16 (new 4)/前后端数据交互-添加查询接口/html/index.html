<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>
    <header class="header">
        <div class="header-wrap">
            <div class="header-warp-content">
                <div class="header-main">
                    <h1 class="logo"><a href="/"><img src="./imgs/logo.png" alt="logo" /></a></h1>
                    <nav class="nav">
                        <a href="##">首页</a>
                        <a href="##">动漫资讯</a>
                        <a href="##">动漫美图</a>
                        <a href="##">动漫mtv</a>
                    </nav>
                    <div class="login-reg">
                        <form class="search">
                            <input class="text" type="text">
                            <input class="btn" type="submit" value="">
                        </form>
                        <a class="to-login" href="javascript:;">登录</a>
                        <a class="to-reg" href="##">注册</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section class="main">
        <h1 class="title">标题标题标题标题标题标题标题标题</h1>
        <div class="article-info">
            <span class="time">日期： 2013年12月12日12:12:12</span>
            <a class="commit" href="#commit">评论(3)</a>
            <a class="hot" href="#hot">热度(5)</a>
        </div>
        <article class="article">
            <p>500米的距离对于两艘军舰而言是什么概念？中国海军军事专家李杰对《环球时报》记者说，按照海上舰船通常一小时可以开50多公里的速度，两舰相向而行，如果不规避的话，只要十几秒钟就可能发生误撞。而且军舰一般体积较大，500米距离有一定危险性。正如当年中美战机相撞，两军舰船距离一近也容易发生事故。正如当年中美战机相撞，两军舰船距离一近也容易发生事故。正如当年中美战机相撞，两军舰船距离一近也容易发生事故。</p>
            <p>500米的距离对于两艘军舰而言是什么概念？中国海军军事专家李杰对《环球时报》记者说，按照海上舰船通常一小时可以开50多公里的速度，两舰相向而行，如果不规避的话，只要十几秒钟就可能发生误撞。而且军舰一般体积较大，500米距离有一定危险性。正如当年中美战机相撞，两军舰船距离一近也容易发生事故。正如当年中美战机相撞，两军舰船距离一近也容易发生事故。正如当年中美战机相撞，两军舰船距离一近也容易发生事故。</p>
        </article>
        <div class="links">
            <a href="##">上一篇：中国劳动力调查</a>
        </div>
        <h3 class="module-title">发表评论</h3>
        <textarea id="textNode" class="textarea"></textarea>
        <a id="btnNode" href="javascript:;" class="textarea-btn"></a>
        <h3 class="module-title">评论</h3>
        <div class="commit" id="commitNode">
            <!-- <dl>
                <dt>匿名网友 2013-12-12 12:12:12 发表 </dt>
                <dd>好文章！好文章！好文章！好文章！好文章！好文章！好文章！</dd>
            </dl>
            <dl>
                <dt>匿名网友 2013-12-12 12:12:12 发表 </dt>
                <dd>好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！</dd>
            </dl> -->
        </div>
    </section>

    <footer class="copyright">
        copyright 203 xxxxxx All Rights Reserved<br />xx公司 版权所有
    </footer>

    <!--display: none; 隐藏元素-->
    <div class="dialog" style="display: none;">
        <div class="dialog-main">
            <div class="dialog-header clearfix">
                <h3 class="title">登录</h3>
                <a class="close" href="javascript:;">关闭<span>x</span></a>
            </div>
            <div class="dialog-content clearfix">
                <div class="left">
                    <label class="input mt-22">
                        <span class="label">用户名：</span>
                        <input class="text" type="text" />
                    </label>
                    <label class="input mt-9">
                        <span class="label">密码：</span>
                        <input class="text" type="password" />
                    </label>
                    <div class="radio">
                        <label><input type="radio" name="time" /><span>不保存</span></label>
                        <label><input type="radio" name="time" /><span>一天</span></label>
                        <label><input type="radio" name="time" /><span>一个月</span></label>
                        <label><input type="radio" name="time" /><span>永久</span></label> 
                    </div>
                    <div class="submit clearfix">
                        <a class="btn textarea-btn" href="javascript:;"></a>
                        <a class="forget" href="##">忘记密码</a>
                    </div>
                </div>
                <div class="right">
                    <div class="text">还没有注册账号？</div>
                    <a class="btn textarea-btn" href="javascript:;"></a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 前端代码
        var oComment = {
            init(){
                var that = this;
                var btnNode = document.querySelector('#btnNode');
                var textNode = document.querySelector('#textNode');
                var commitNode = document.querySelector('#commitNode');
                btnNode.onclick = function(){
                    // 左键单击事件
                    var text = textNode.value; // 获取文本域的值
                    var dlNode = document.createElement('dl');
                    var dtNode = document.createElement('dt');
                    var ddNode = document.createElement('dd');
                    dtNode.innerHTML = `匿名网友 2013-12-12 12:12:12 发表 `;
                    ddNode.innerHTML = text;
                    dlNode.appendChild(dtNode);
                    dlNode.appendChild(ddNode);
                    commitNode.appendChild(dlNode);
                    textNode.value = '';// 将文本域的值清空
                    /*<dl>
                        <dt>匿名网友 2013-12-12 12:12:12 发表 </dt>
                        <dd>好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！好文章！</dd>
                    </dl>*/


                }

                that.getCommit(commitNode);
            },
            getCommit(commitNode){
                var that = this;
                //获取评论信息
                var ajax = new XMLHttpRequest();
                ajax.open('get', '/commit/list?id=1');
                ajax.send();
                ajax.onreadystatechange = function(){
                    if(ajax.status === 200 && ajax.readyState === 4){
                        var json = JSON.parse(ajax.responseText);
                        // console.log(json,99888);
                        var flagNode = document.createDocumentFragment(); //碎片节点
                        json.data.forEach(function(item){
                            var dlNode = document.createElement('dl');
                            var dtNode = document.createElement('dt');
                            var ddNode = document.createElement('dd');
                            dtNode.innerHTML = `匿名网友 ${that.parseTime(item.createdTime)} 发表 `;
                            ddNode.innerHTML = item.content;
                            dlNode.appendChild(dtNode);
                            dlNode.appendChild(ddNode);
                            flagNode.appendChild(dlNode);
                        });
                        commitNode.appendChild(flagNode);
                    }
                }
            },
            parseTime(time){
                var that = this;
                // time是指时间戳
                console.log(time,9998)
                var dateObj = new Date();
                dateObj.setTime(time)
                var year = dateObj.getFullYear();
                var month = dateObj.getMonth() + 1;
                var date = dateObj.getDate();
                var day = dateObj.getDay(); // 0 - 6
                var hours = dateObj.getHours(); // 0 ~ 23
                var minutes = dateObj.getMinutes(); // 0 - 59
                var seconds = dateObj.getSeconds(); // 0 - 59

                return `${year}-${that.tenAddZero(month)}-${that.tenAddZero(date)} ${that.tenAddZero(hours)}:${that.tenAddZero(minutes)}:${that.tenAddZero(seconds)}`;
            },
            tenAddZero(num){
                // 将小于10的数字前补0； num: number
                return num < 10 ? '0' + num : num.toString();
            }
        };

        oComment.init(); //调用提交评论功能
    </script>
</body>
</html>