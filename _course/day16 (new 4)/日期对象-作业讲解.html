<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .date{ display: flex; align-items: center; width: 674px; height: 126px; background-image: linear-gradient(#066bc1, #67a7e0); border-radius: 20px; color: #fff;}
        .date .h-m-s{ display: flex; align-items: flex-end;  margin-left: 22px; font-size: 56px; line-height: 1;}
        .date .h-m-s .s{ font-size: 26px; margin-left: 22px;}
        .date .y-m-d{ margin-left: 56px;}
        .date .y-m-d .w{ font-size: 25px;}
        .date .y-m-d .y-m{ font-size: 18px;}
        .clock{ position: relative; width: 90px; height: 90px; margin-left: 60px;}
        .clock .init-number,.clock .init-number-6deg{ position: absolute; left: 50%; top: 0; margin-left: -1px; width: 2px; height: 10px; background-color: #fff; transform-origin: 50% 45px;}
        .clock .init-number-6deg{ background-color: #5d9fd9; height: 5px;}
        .clock .pointer{ position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 4px; height: 4px; background-color: #f00; border-radius: 50%;}
        .clock .hours,.clock .minutes,.clock .seconds{ position: absolute; left: 50%; top: 50%; transform: translate(-50%, -100%) rotate(0deg); transform-origin: 50% 100%;  }
        .clock .hours{width: 4px; height: 20px; background-color: #00f;}
        .clock .minutes{width: 2px; height: 25px; background-color: #0f0;}
        .clock .seconds{width: 2px; height: 30px; background-color: yellow;}
    </style>
</head>
<body>
    <div class="date">
        
        
        <div class="clock">
            <!-- <i class="hours"></i>
            <i class="minutes"></i>
            <i class="seconds"></i>
            <i class="pointer"></i> -->
            
        </div>
    <script>
        var oClock = {
            init(){
                //初始化
                var that = this; // this;只有函数调用时才知道指向谁，谁调用init，this就指向谁
                that.clock();
                window.setInterval(function(){
                    that.clock();
                }, 1000);
            },
            weekZh(day){
                // 将数字周转为中文; day: number
                switch(day){
                    case 0:
                        return '日';
                    case 1:
                        return '一';
                    case 2:
                        return '二';
                    case 3:
                        return '三';
                    case 4:
                        return '四';
                    case 5:
                        return '五';
                    case 6:
                        return '六';
                }
            },
            tenAddZero(num){
                // 将小于10的数字前补0； num: number
                return num < 10 ? '0' + num : num.toString();
            },
            clockContainter(){
                // 时钟的刻度及轮廓
                var fragNode = document.createDocumentFragment(); // 节点容器
                var clockNode = document.createElement('div'); //div节点
                clockNode.className = 'clock'; // div节点添加类选择器
                for(var i = 0; i < 12; i++){
                    var iNode = document.createElement('i'); // 创建一个i节点，在内存
                    iNode.className = 'init-number'; // i节点添加类选择器
                    iNode.style.transform = `rotate(${30*i}deg)` // i节点添加css的transform属性值
                    fragNode.appendChild(iNode); //将i节点放入fragNode节点容器
                }
                for(var j = 0; j < 60; j++){
                    if( (j*6) % 30 !== 0){
                        var iNode = document.createElement('i');
                        iNode.className = 'init-number-6deg';
                        iNode.style.transform = `rotate(${6*j}deg)`
                        fragNode.appendChild(iNode);
                    }
                }
                clockNode.appendChild(fragNode); // 将容器中所有的i节点放入到div节点中
                return clockNode;
            },
            clock(){
                var that = this; 
                var dateObj = new Date(); // 现在这个时间对象
                console.log(dateObj.toString());
                var year = dateObj.getFullYear();
                var month = dateObj.getMonth() + 1;
                var date = dateObj.getDate();
                var day = dateObj.getDay(); // 0 - 6
                var hours = dateObj.getHours(); // 0 ~ 23
                var minutes = dateObj.getMinutes(); // 0 - 59
                var seconds = dateObj.getSeconds(); // 0 - 59
                var dateNode = document.querySelector('.date'); // 在文档中，通过选择器查找节点（标签）,节点对象
                console.log(year,month,date)
                // innerHTML 节点属性，可在节点中插入html字符串
                // createElement(); appendChild();
                
                var clockContainterNode = that.clockContainter();// 调用方法后会返回一个clock的轮廓对象
                var hmsNode = document.createElement('div');// 小时分秒的div节点
                hmsNode.className = 'h-m-s';
                hmsNode.innerHTML = `${that.tenAddZero(hours)}:${that.tenAddZero(minutes)}<span class="s">${that.tenAddZero(seconds)}</span>`;

                var ymdNode = document.createElement('div');// 年月日的div节点
                ymdNode.className = "y-m-d";
                ymdNode.innerHTML = `<div class="w">星期${that.weekZh(day)}</div><div class="y-m">${year}年${month}月${date}日</div>`;

                var pointerNode = document.createElement('i');// 时钟中心点节点
                pointerNode.className = 'pointer';

                var hoursNode = document.createElement('i');// 小时的节点
                var hoursRotate = (hours >= 12 ? hours - 12 : hours) * 30 + minutes * 6 / 360 * 30;// 当前小时的角度
                hoursNode.className = 'hours';
                hoursNode.style.transform = `translate(-50%, -100%) rotate(${hoursRotate}deg)`;

                var minutesNode = document.createElement('i');// 分的节点
                var minutesRotate = minutes * 6;
                minutesNode.className = 'minutes';
                minutesNode.style.transform = `translate(-50%, -100%) rotate(${minutesRotate}deg)`;

                var secondsNode = document.createElement('i');// 分的节点
                var secondsRotate = seconds * 6;
                secondsNode.className = 'seconds';
                secondsNode.style.transform = `translate(-50%, -100%) rotate(${secondsRotate}deg)`;


                dateNode.innerHTML = ''; // 清空日期节点的所有html
                clockContainterNode.appendChild(secondsNode);
                clockContainterNode.appendChild(minutesNode);
                clockContainterNode.appendChild(hoursNode);
                clockContainterNode.appendChild(pointerNode);
                dateNode.appendChild(clockContainterNode);
                dateNode.appendChild(hmsNode);
                dateNode.appendChild(ymdNode);
                
                // innerHTML慎用，防止xss攻击
            }
        };

        oClock.init(); // 调用
    </script>
</body>
</html>